---
layout: default
---

<head>
    <link rel="stylesheet" href="../../css/index.css">
</head>

<body>
<!-- Side navigation -->
<div class="sidenav">
    <a href="../../index.html" class="nav1">Introduction</a>
    <a href="../gettingstarted.html" class="nav1">Getting started</a>
    <a href="../modules.html" class="nav1">Modules</a>
    <a href="../modulelist.html" class="nav2">List of modules</a>
    <a href="../macros.html" class="nav1">Macros</a>
    <a href="../extendingmia.html" class="nav1">Extending MIA</a>
</div>

<!-- Page content -->
<div class="main">
    <!--The following is replaced automatically by the generated module list-->
    <a href="../modulelist.html">Back to module list</a>
<h1>Add relationship connection</h1>
<h2>Description</h2>
Adds a series of line overlays, representing various relationship scenarios.  Lines extend between centroids of two objects.  Depicted relationships can be between mutual child of the same parent object, between partner objects of between children and parents.
<h2>Parameters</h2>
<ul><li>Colour mode<ul><li>Description: Method for determining colour of each object's corresponding overlay:<br><ul><li>"Child count" Overlay colour is determined by the number of children each object has.  Colour range runs across the first half of the visible spectrum (i.e. red to cyan) and is maximised, so the object with the fewest children is shown in red and the object with the most, in cyan.  Objects without any children are always shown in red.  Child objects used for counting are selected with the "Child objects for colour" parameter.</li><li>"ID" Overlay colour is quasi-randomly selected based on the ID number of the object.  The colour used for a specific ID number will always be the same and is calculated using the equation <i>hue = (ID * 1048576 % 255) / 255</i>.</li><li>"Measurement value" Overlay colour is determined by a measurement value.  Colour range runs across the first half of the visible spectrum (i.e. red to cyan) and is maximised, so the object with the smallest measurement is shown in red and the object with the largest, in cyan.  Objects missing the relevant measurement  are always shown in red.  The measurement value is selected with the "Measurement for colour" parameter.</li><li>"Parent ID" Overlay colour is quasi-randomly selected based on the ID number of a parent of this object.  The colour used for a specific ID number will always be the same and is calculated using the equation <i>hue = (ID * 1048576 % 255) / 255</i>.  The parent object is selected with the "Parent object for colour" parameter.</li><li>"Parent measurement value" Overlay colour is determined by a measurement value of a parent of this object.  Colour range runs across the first half of the visible spectrum (i.e. red to cyan) and is maximised, so the object with the smallest measurement is shown in red and the object with the largest, in cyan.  Objects either missing the relevant measurement or without the relevant parent are always shown in red.  The parent object is selected with the "Parent object for colour" parameter and the measurement value is selected with the "Measurement for colour" parameter.</li><li>"Partner count"  Overlay colour is determined by the number of partners each object has.  Colour range runs across the first half of the visible spectrum (i.e. red to cyan) and is maximised, so the object with the fewest partners is shown in red and the object with the most, in cyan.  Objects without any partners are always shown in red.  Partner objects used for counting are selected with the "Partner objects for colour" parameter.</li><li>"Random colour" Overlay colour is randomly selected for each object.  Unlike the "ID" option, the colours generated here will be different for each evaluation of the module.</li><li>"Single colour" (default option) Overlay colour is fixed to one of a predetermined list of colours.  All objects  will be assigned the same overlay colour.  The colour is chosen using the "Single colour" parameter.</li></ul></li><li>Type: ChoiceP</li><li>Default value: Single colour</li><li>Choices: <ul><li>Child count</li><li>ID</li><li>Measurement value</li><li>Parent ID</li><li>Parent measurement value</li><li>Partner count</li><li>Random colour</li><li>Single colour</li></ul></li></ul><br><li>Single colour<ul><li>Description: Colour for all object overlays to be rendered using.  This parameter is used if "Colour mode" is set to "Single colour".  Options are: White, Black, Red, Orange, Yellow, Green, Cyan, Blue, Violet, Magenta.</li><li>Type: ChoiceP</li><li>Default value: White</li><li>Choices: <ul><li>White</li><li>Black</li><li>Red</li><li>Orange</li><li>Yellow</li><li>Green</li><li>Cyan</li><li>Blue</li><li>Violet</li><li>Magenta</li></ul></li></ul><br><li>Child objects for colour<ul><li>Description: Object collection used to determine the colour of the overlay based on number of children per object when "Colour mode" is set to "Child count".  These objects will be children of the input objects.</li><li>Type: ChildObjectsP</li></ul><br><li>Measurement for colour<ul><li>Description: Measurement used to determine the colour of the overlay when "Colour mode" is set to either "Measurement value" or "Parent measurement value".</li><li>Type: ObjectMeasurementP</li></ul><br><li>Parent object for colour<ul><li>Description: Object collection used to determine the colour of the overlay based on either the ID or measurement value  of a parent object when "Colour mode" is set to either  "Parent ID" or "Parent measurement value".  These objects will be parents of the input objects.</li><li>Type: ParentObjectsP</li></ul><br><li>Partner objects for colour<ul><li>Description: Object collection used to determine the colour of the overlay based on number of partners per object when "Colour mode" is set to "Partner count".  These objects will be partners of the input objects.</li><li>Type: PartnerObjectsP</li></ul><br><li>Opacity (%)<ul><li>Description: Opacity of the overlay to be rendered.  This is a value between 0 (totally transparent) and 100 (totally opaque).</li><li>Type: DoubleP</li><li>Default value: 100.0</li></ul><br><li>Input image<ul><li>Description: Image onto which overlay will be rendered.  Input image will only be updated if "Apply to input image" is enabled, otherwise the image containing the overlay will be stored as a new image with name specified by "Output image".</li><li>Type: InputImageP</li></ul><br><li>Line mode<ul><li>Description: Controls what object-object relationships will be represented by the lines.  In all cases, lines are drawn between object centroids, although the line start and end points can be offset along the line when the "Offset by measurement" setting is selected:<br><br>- "Between children" Draw lines between all objects in two child object sets of a common parent object ("Parent objects").  This will result in all permutations of lines between one child object set and the other  The child object sets are selected with the "Child objects 1" and "Child objects 2" parameters.<br><br>- "Between partners" Draw lines between all partner objects.  The two partner object sets are selected using the "Partner objects 1" and "Partner objects 2" parameters.<br><br>- "Parent to child" Draw lines between parent objects and all their children.  Parent objects are selected using the "Parent objects" parameter and children using the "Child objects 1" parameter..<br></li><li>Type: ChoiceP</li><li>Default value: Parent to child</li><li>Choices: <ul><li>Between children</li><li>Between partners</li><li>Parent to child</li></ul></li></ul><br><li>Parent objects<ul><li>Description: Used to select the parent object of the two child object sets when in "Between children" mode, or to select the parent objects in "Parent to child" mode.</li><li>Type: InputObjectsP</li></ul><br><li>Child objects 1<ul><li>Description: Selects the first child objects set when in "Between children" mode, or the (only) child set when in "Parent to child" mode.</li><li>Type: ChildObjectsP</li></ul><br><li>Child objects 2<ul><li>Description: Selects the second child objects set when in "Between children" mode.</li><li>Type: ChildObjectsP</li></ul><br><li>Partner objects 1<ul><li>Description: Selects the first partner objects set when in "Between partners" mode.</li><li>Type: InputObjectsP</li></ul><br><li>Partner objects 2<ul><li>Description: Selects the second partner objects set when in "Between partners" mode.</li><li>Type: PartnerObjectsP</li></ul><br><li>Apply to input image<ul><li>Description: Determines if the modifications made to the input image (added overlay elements) will be applied to that image or directed to a new image.  When selected, the input image will be updated.</li><li>Type: BooleanP</li><li>Default value: false</li></ul><br><li>Add output image to workspace<ul><li>Description: If the modifications (overlay) aren't being applied directly to the input image, this control will determine if a separate image containing the overlay should be saved to the workspace.</li><li>Type: BooleanP</li><li>Default value: false</li></ul><br><li>Output image<ul><li>Description: The name of the new image to be saved to the workspace (if not applying the changes directly to the input image).</li><li>Type: OutputImageP</li></ul><br><li>Render mode<ul><li>Description: Controls how the line is displayed between the centroids of the relevant two objects:<br><br>- "Full line" Draws a complete line between the two centroids (unless "Offset by measurement" is selected, in which case the line won't necessarily begin at the centroid).<br><br>- "Half line" Draws a line between the first object (either "Child objects 1", "Partner objects 1" or "Parent objects" when in "Between children", "Between partners" or "Parent to child" modes, respectively) and the mid-point between the two relevant objects.  Any offsets applied when "Offset by measurement" is selected still apply.<br><br>- "Midpoint dot" Draws a dot half way between the two relevant objects (no line is drawn).<br></li><li>Type: ChoiceP</li><li>Default value: Full line</li><li>Choices: <ul><li>Full line</li><li>Half line</li><li>Midpoint dot</li></ul></li></ul><br><li>Line width<ul><li>Description: Width of the rendered lines.  Specified in pixel units.</li><li>Type: DoubleP</li><li>Default value: 1.0</li></ul><br><li>Point size<ul><li>Description: Size of each overlay marker.  Options are: Tiny, Small, Medium, Large, Extra large.</li><li>Type: ChoiceP</li><li>Default value: Small</li><li>Choices: <ul><li>Tiny</li><li>Small</li><li>Medium</li><li>Large</li><li>Extra large</li></ul></li></ul><br><li>Point type<ul><li>Description: Type of overlay marker used to represent each object.  Options are: Circle, Cross, Dot, Hybrid.</li><li>Type: ChoiceP</li><li>Default value: Circle</li><li>Choices: <ul><li>Circle</li><li>Cross</li><li>Dot</li><li>Hybrid</li></ul></li></ul><br><li>Offset by measurement<ul><li>Description: When selected, the lines at either end can start a fraction of the way between the two relevant object centroids.  Separate offsets are applied at each end, with measurements providing the offset values selected using the "Measurement name 1" and "Measurement name 2" parameters.  For example.  This is useful when it is preferable to not have the line extend all the way between centroids.</li><li>Type: BooleanP</li><li>Default value: false</li></ul><br><li>Measurement name 1<ul><li>Description: Object measurement specifying offset to be applied to the line start point.  Offsets are fractional values, specifying the proportion of the line to ignore.  For example, dual offsets of 0.25 will result in a line half the usual length.</li><li>Type: ObjectMeasurementP</li></ul><br><li>Measurement name 2<ul><li>Description: Object measurement specifying offset to be applied to the line end point.  Offsets are fractional values, specifying the proportion of the line to ignore.  For example, dual offsets of 0.25 will result in a line half the usual length.</li><li>Type: ObjectMeasurementP</li></ul><br><li>Render in all frames<ul><li>Description: Display the overlay elements in all frames (time axis) of the input image stack, irrespective of whether the object was present in that frame.</li><li>Type: BooleanP</li><li>Default value: false</li></ul><br><li>Enable multithreading<ul><li>Description: Process multiple overlay elements simultaneously.  This can provide a speed improvement when working on a computer with a multi-core CPU.</li><li>Type: BooleanP</li><li>Default value: true</li></ul><br></ul>

</div>
</body>